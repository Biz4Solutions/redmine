<fieldset class="box">
  <legend><%= label_tag("principal_search", l(:label_principal_search)) %></legend>
  <p><%= text_field_tag('principal_search', nil) %></p>
  <%= javascript_tag "observeSearchfield('principal_search', null, '#{ escape_javascript autocomplete_project_memberships_path(@project, :format => 'js') }')" %>
  <div id="principals_for_new_member">
    <%= render_principals_for_new_members(@project) %>
  </div>
</fieldset>
<fieldset class="box">
  <legend><%= toggle_checkboxes_link('.roles-selection input') %><%= l(:label_role_plural) %></legend>
  <div class="roles-selection">
    <% User.current.managed_roles(@project).each do |role| %>
      <label><%= check_box_tag 'membership[role_ids][]', role.id, false, :id => nil %> <%= role %></label>
    <% end %>
  </div>
</fieldset>
<fieldset class="box">
  <legend><%= l(:label_allocation) %></legend>
  <p>
    <%= label_tag 'membership[allocation_percentage]', l(:field_allocation_percentage) %>
    <%= number_field_tag 'membership[allocation_percentage]', 100, min: 0, max: 100, step: 0.01 %>%
  </p>
  <p>
    <%= label_tag 'membership[start_date]', l(:field_start_date) %>
    <%= date_field_tag 'membership[start_date]', @project.start_date %>
  </p>
  <p>
    <%= label_tag 'membership[end_date]', l(:field_end_date) %>
    <%= date_field_tag 'membership[end_date]', @project.due_date %>
  </p>
</fieldset>
